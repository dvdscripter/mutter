From 65963748860aec8e3d7ee939b3b16876f4117904 Mon Sep 17 00:00:00 2001
From: Colin Walters <walters@verbum.org>
Date: Thu, 05 May 2011 20:11:02 +0000
Subject: region-utils.c: Squash a memory leak

"chunk" was an allocated but unused variable.

https://bugzilla.gnome.org/show_bug.cgi?id=649504
---
diff --git a/src/compositor/region-utils.c b/src/compositor/region-utils.c
index b4071ca..cf3c64e 100644
--- a/src/compositor/region-utils.c
+++ b/src/compositor/region-utils.c
@@ -248,7 +248,6 @@ expand_region_inverse (cairo_region_t *region,
   MetaRegionBuilder builder;
   MetaRegionIterator iter;
   cairo_rectangle_int_t extents;
-  cairo_region_t *chunk;
 
   int last_x;
 
@@ -268,16 +267,11 @@ expand_region_inverse (cairo_region_t *region,
                      extents.x, extents.y + extents.height, extents.width, 1,
                      x_amount, y_amount, flip);
 
-  chunk = NULL;
-
   last_x = extents.x;
   for (meta_region_iterator_init (&iter, region);
        !meta_region_iterator_at_end (&iter);
        meta_region_iterator_next (&iter))
     {
-      if (chunk == NULL)
-        chunk = cairo_region_create ();
-
       if (iter.rectangle.x > last_x)
         add_expanded_rect (&builder,
                            last_x, iter.rectangle.y,
--
cgit v0.9
From d0414a3ea697738dcdf2641b6a8000df35215862 Mon Sep 17 00:00:00 2001
From: Colin Walters <walters@verbum.org>
Date: Thu, 05 May 2011 20:46:00 +0000
Subject: theme.c: Squash memory leak

When converting a token to a different type, we need to free its
string.

https://bugzilla.gnome.org/show_bug.cgi?id=649500
---
diff --git a/src/ui/theme.c b/src/ui/theme.c
index 0077388..9305645 100644
--- a/src/ui/theme.c
+++ b/src/ui/theme.c
@@ -2639,11 +2639,13 @@ meta_theme_replace_constants (MetaTheme   *theme,
         {
           if (meta_theme_lookup_int_constant (theme, t->d.v.name, &ival))
             {
+              g_free (t->d.v.name);
               t->type = POS_TOKEN_INT;
               t->d.i.val = ival;
             }
           else if (meta_theme_lookup_float_constant (theme, t->d.v.name, &dval))
             {
+              g_free (t->d.v.name);
               t->type = POS_TOKEN_DOUBLE;
               t->d.d.val = dval;
             }
--
cgit v0.9
